!function($){$.fn.encuadrador=function(options){function render(obj,options,cont){var stx={pixels:"px",minus:"-",space:" "},margin={right:Math.round(options.height/2),left:Math.round(options.width/2)};console.log("get"+cont.width+" "+cont.height),$(obj).parent().css({height:cont.height+stx.pixels,overflow:"hidden !important",position:"relative","background-image":"url("+opts.backgroundImage+")","background-repeat":"no-repeat","background-position":"center center"}),$(obj).delay(opts.delaySpeed).css({top:"50%",left:"50%",position:"absolute",height:options.height+stx.pixels,width:options.width+1+stx.pixels,margin:stx.minus+margin.right+stx.pixels+stx.space+"0"+stx.space+"0"+stx.pixels+stx.space+stx.minus+margin.left+stx.pixels}),$(obj).delay(opts.delaySpeed).animate({opacity:"1","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"alpha(opacity=100)","-moz-opacity":"1","-khtml-opacity":"1"},opts.fadeInSpeed)}function getResizedSize(cont,src){var h=Math.round(cont.width*src.height/src.width),w=Math.round(cont.height*src.width/src.height),useH=new Array;useH.width=w,useH.height=cont.height;var useW=new Array;useW.width=cont.width,useW.height=h;var miArray=new Array;return miArray.useHeight=useH,miArray.useWidth=useW,miArray}function getOptionToSample(cont,src){var resized=getResizedSize(cont,src),miArray=new Array;switch(getDisposition(src.width,src.height)){case"c":miArray.width=cont.width,miArray.height=resized.useWidth.height,miArray.disposition="c";break;case"v":resized.useWidth.height>=cont.height&&(miArray.width=cont.width,miArray.height=resized.useWidth.height,miArray.disposition="v");break;case"a":resized.useWidth.height>=cont.height?(miArray.width=cont.width,miArray.height=resized.useWidth.height,miArray.disposition="v"):resized.useWidth.height<cont.height&&(miArray.width=resized.useHeight.width,miArray.height=cont.height,miArray.disposition="a")}return miArray}function getSrcWidthHeight(obj){var h=$(obj).height(),w=$(obj).width(),miArray=new Array;return miArray.width=w,miArray.height=h,miArray}function getContainerWidthHeight(obj){var h=$(obj).parent().height(),w=$(obj).parent().width(),miArray=new Array;return miArray.width=w,miArray.height=h,miArray}function getDisposition(width,height){return width==height?"c":width>height?"a":"v"}var opts=$.extend({fadeInSpeed:100,delaySpeed:0,backgroundImage:"image-resize-1.0/images/camera.png"},options);return $(this).removeAttr("style width height"),$(this).addClass("image-resize_attr"),$(this).parent().addClass("image-resize_containerAttr"),this.each(function(){var src=getSrcWidthHeight(this),cont=getContainerWidthHeight(this);render(this,getOptionToSample(cont,src),cont)})}}(jQuery);